<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Planilha Financeira Moderna</title>
    <style>
        /* ... (manter o mesmo CSS anterior) ... */

        .nome-categoria {
            display: inline-block;
            padding-right: 10px;
        }

        .controles-categoria {
            display: inline-flex;
            gap: 8px;
            opacity: 1;
            transition: opacity 0.2s;
        }

        .controles-categoria.hidden {
            display: none;
        }

        .modo-visualizacao .nome-categoria {
            width: 100%;
            padding: 0;
        }
    </style>
</head>
<body>
    <!-- ... (manter o mesmo HTML anterior) ... -->

    <script>
        // ... (manter as mesmas vari√°veis e fun√ß√µes anteriores) ... 

        function atualizarTabela() {
            const tabela = document.getElementById('planilha');
            // Limpar tabela
            while(tabela.rows.length > 1) {
                tabela.deleteRow(1);
            }
            
            // Adicionar categorias
            categorias.forEach((categoria, index) => {
                const row = tabela.insertRow();
                const cell = row.insertCell();
                cell.className = 'categoria';
                cell.innerHTML = `
                    <div class="${mostrarControles ? '' : 'modo-visualizacao'}">
                        <span class="nome-categoria">${categoria.nome}</span>
                        <span class="controles-categoria ${mostrarControles ? '' : 'hidden'}">
                            <button onclick="editarCategoria(${index})">‚úèÔ∏è</button>
                            <button onclick="excluirCategoria(${index})">üóëÔ∏è</button>
                            <button onclick="moverCategoria(${index}, -1)">‚¨ÜÔ∏è</button>
                            <button onclick="moverCategoria(${index}, 1)">‚¨áÔ∏è</button>
                        </span>
                    </div>
                `;
                cell.dataset.tipo = categoria.tipo;
            });
            
            // Adicionar linha de total
            const totalRow = tabela.insertRow();
            totalRow.innerHTML = '<td class="total">Total</td>';
            
            criarMeses();
            calcularTotais();
        }

        function toggleControls() {
            mostrarControles = !mostrarControles;
            document.querySelectorAll('.controles-categoria').forEach(div => {
                div.classList.toggle('hidden', !mostrarControles);
            });
            document.querySelectorAll('.categoria > div').forEach(div => {
                div.classList.toggle('modo-visualizacao', !mostrarControles);
            });
            document.querySelector('.toggle-controls').textContent = 
                mostrarControles ? 'Ocultar Controles' : 'Mostrar Controles';
        }

        // ... (manter o resto do JavaScript anterior) ...
    </script>
</body>
</html>
